<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.9/css/all.css" integrity="sha384-5SOiIsAziJl6AWe0HWRKTXlfcSHKmYV4RBF18PPJ173Kzn7jzMyFuTtk8JA7QQG1" crossorigin="anonymous">
  <link rel="stylesheet" href="theme.css" type="text/css"> </head>
<body id="klarnasignup" class="">
  <nav class="navbar navbar-expand-md bg-primary navbar-dark">
    <div class="container">
      <img src="images/klarna-white.svg"/ height="20px">
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbar2SupportedContent">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse text-center justify-content-end" id="navbar2SupportedContent"> </div>
    </div>
  </nav>
  <div class="p-2">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h1 class="">Melden Sie sich für den 1 Step Checkoutan</h1>
        </div>
      </div>
    </div>
  </div>
  <div class="p-0">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <p class="">Um den 1 Step Checkout nutzen zu können, ist es erforderlich, dass Sie sich bei Klarna als Händler registrieren.</p>
          <p>Die Freischaltung Ihres Account erfolgt vollautomatisch innerhalb 1-3 Werktage.</p>
        </div>
      </div>
    </div>
  </div>
  
  
{if $stores|@count gt 1}
  <form class="" action="klarna.php" method="GET">
  <div class="p-0" >
    <div class="container">
      <div class="row">


        <div class="col-md-6">
        
          <div class="row">
              <div class="col-md-12">
                <div class="form-group m-0">
                  <label>Mandant</label>
                  <select class="form-control form-control-sm" name="store">
                  {foreach from=$stores item=shop}
                  	<option value="{$shop.id}">{$shop.text}</option>
                  {/foreach}
                  </select>
                  <hr>
                </div>
              </div>
            </div>
            </div>
            </div>
</div>
</div>
</form>
{/if}  
  
  
  <form class="" id="registerForm" action="klarna.php?page=form" method="POST">
{if $organization_registration_authority neq ''}
<input type="hidden" id="_organization_registration_authority" name="_organization_registration_authority" value="{$organization_registration_authority}">
{else}
<input type="hidden" id="_organization_registration_authority" name="_organization_registration_authority" value="empty">
{/if}


  
  <div class="p-0" >
    <div class="container">
      <div class="row">

        <div class="col-md-6">
        
          <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label>Unternehmenssitz</label>
                  <select class="form-control form-control-sm{if $_errors.country} is-invalid{/if}" name="country" id="country">
                  	<option value="">--</option>             	
                    <option value="DE"{if $country eq 'DE'} selected{/if}>Deutschland</option>
                    <option value="AT"{if $country eq 'AT'} selected{/if}>Österreich</option>
                    <option value="OTHER"{if $country eq 'OTHER'} selected{/if}>Anderes Land</option>
                  </select>
                  {if $_errors.country}<div class="invalid-feedback">{$_errors.country}</div>{/if}
                </div>
              </div>
            </div>

          <div id="other_country_info">
            <p>Bitte registrieren Sie sich direkt bei Klarna wenn Ihr Unternehmen aus einem anderen Land kommt</p>
            <a class="btn btn-lg btn-outline-primary m-0" href="https://hello.klarna.com/xtcommercefree.html" target="_blank">1. Jetzt registrieren</a><br />
            <p>Nach Ihrer Registrierung hinterlegen Sie bitte Ihre Klarna Zugangsdaten</p>
            <a class="btn btn-lg btn-outline-primary m-0" href="klarna.php?page=existing_account">2. Zugangsdaten Eingeben</a>
          </div>

          <div id="regform_left">
            <div class="row">
              <div class="col-md-12">
                <div class="form-group">

                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="1" id="registercheck" name="registercheck"{if $registercheck eq '1'} checked{/if}>
                    <label class="form-check-label" for="registercheck">Im Handelsregister eingetragen</label>
                  </div>
                  

                  
                </div>
              </div>
            </div>
            <div id="unregistered_fields">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group m-0">
                    <label>Vorname</label>
                    <input type="text" class="form-control form-control-sm{if $_errors.given_name} is-invalid{/if}" name="given_name"{if $given_name} value="{$given_name}"{/if}>
                    {if $_errors.given_name}<div class="invalid-feedback">{$_errors.given_name}</div>{/if} </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group m-0">
                    <label>Nachname</label>
                    <input type="text" class="form-control form-control-sm{if $_errors.family_name} is-invalid{/if}" name="family_name"{if $family_name} value="{$family_name}"{/if}>
                    {if $_errors.family_name}<div class="invalid-feedback">{$_errors.family_name}</div>{/if} </div>
                </div>
              </div>
              <div class="form-group m-0">
                <label>Geburtstag</label>
                <input type="date" class="form-control form-control-sm{if $_errors.date_of_birth} is-invalid{/if}" name="date_of_birth"{if $date_of_birth} value="{$date_of_birth}"{/if}>
                {if $_errors.date_of_birth}<div class="invalid-feedback">{$_errors.date_of_birth}</div>{/if} </div>
              <div class="row">
                <div class="col-md-12">
                  <div class="form-group m-0">
                    <label>Strasse</label>
                    <input type="text" class="form-control form-control-sm{if $_errors.street_address} is-invalid{/if}" name="street_address"{if $street_address} value="{$street_address}"{/if}>
                    {if $_errors.street_address}<div class="invalid-feedback">{$_errors.street_address}</div>{/if} </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3">
                  <div class="form-group m-0">
                    <label>PLZ</label>
                    <input type="text" class="form-control form-control-sm{if $_errors.postal_code} is-invalid{/if}" name="postal_code"{if $postal_code} value="{$postal_code}"{/if}>
                    {if $_errors.postal_code}<div class="invalid-feedback">{$_errors.postal_code}</div>{/if} </div>
                </div>
                <div class="col-md-9">
                  <div class="form-group m-0">
                    <label>Stadt</label>
                    <input type="text" class="form-control form-control-sm{if $_errors.city} is-invalid{/if}" name="city"{if $city} value="{$city}"{/if}>
                    {if $_errors.city}<div class="invalid-feedback">{$_errors.city}</div>{/if} </div>
                </div>
              </div>
            </div>
            <div id="registered_fields">
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group m-0">
                    <label>Handelsregisternummer</label>
                    <input type="text" class="form-control form-control-sm{if $_errors.organization_registration_id} is-invalid{/if}" name="organization_registration_id"{if $organization_registration_id} value="{$organization_registration_id}"{/if}> 
                    {if $_errors.organization_registration_id}<div class="invalid-feedback">{$_errors.organization_registration_id}</div>{/if}</div>
                </div>
                <div class="col-md-6">
                  <div class="form-group m-0">
                    <label>Amtsgericht</label>
              
              		<select class="form-control form-control-sm{if $_errors.organization_registration_authority} is-invalid{/if}" name="organization_registration_authority" id="organization_registration_authority">       	
                  	</select>
                  	{if $_errors.organization_registration_authority}<div class="invalid-feedback">{$_errors.organization_registration_authority}</div>{/if}</div>
                
                </div>
                
                
                
                
              </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                  <div class="form-group m-0">
                    <label>Umsatzsteuernummer</label>
                    <input type="text" class="form-control form-control-sm{if $_errors.vat_id} is-invalid{/if}" name="vat_id"{if $vat_id} value="{$vat_id}"{/if}>
                    {if $_errors.vat_id}<div class="invalid-feedback">{$_errors.vat_id}</div>{/if} </div>
                </div>
                <div class="col-md-6"> </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <div class="form-group m-0">
                    <div class="form-check">
                      <input class="form-check-input" type="checkbox" value="1" id="vatidcheck" name="novatrequired">
                      <label class="form-check-label" for="vatidcheck">Umsatz ist unterhalb der Grenze zur Umsatzsteuerpflicht</label>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="form-group m-0">
              <label>E-Mail Adresse (Klarna Account)</label>
              <input type="email" class="form-control form-control-sm{if $_errors.email} is-invalid{/if}" name="account_email"{if $account_email} value="{$account_email}"{/if}> 
              {if $_errors.email}<div class="invalid-feedback">{$_errors.email}</div>{/if}
              </div>
              
              <div class="form-group m-0">
              <label>E-Mail Adresse (Zahlungsbestätigungen)</label>
              <input type="email" class="form-control form-control-sm{if $_errors.confirmation_email} is-invalid{/if}" name="confirmation_email"{if $confirmation_email} value="{$confirmation_email}"{/if}> 
              {if $_errors.confirmation_email}<div class="invalid-feedback">{$_errors.confirmation_email}</div>{/if}
              </div>

</div>
        </div>
        <div class="col-md-6">
          <div id="regform_right">
        <h3>Shop Informationen</h3>
        	<div class="form-group m-0">
              <label>Shop Name</label>
              <input type="text" class="form-control form-control-sm{if $_errors.store_name} is-invalid{/if}" name="store_name"{if $store_name} value="{$store_name}"{/if}> 
              {if $_errors.store_name}<div class="invalid-feedback">{$_errors.store_name}</div>{/if}</div>
            <div class="form-group m-0">
              <label>E-Mail Adresse (Kundensupport)</label>
              <input type="email" class="form-control form-control-sm{if $_errors.support_email} is-invalid{/if}" name="support_email"{if $support_email} value="{$support_email}"{/if}> 
              {if $_errors.support_email}<div class="invalid-feedback">{$_errors.support_email}</div>{/if}</div>
              <div class="form-group m-0">
                  <label>Telefon (Kundensupport)</label>
                  <input type="text" class="form-control form-control-sm{if $_errors.support_phone} is-invalid{/if}" name="support_phone"{if $support_phone} value="{$support_phone}"{/if}> 
                  <small id="phoneHelp" class="form-text text-muted">Mit internationaler Vorwahl (z.B. +49123456)</small>
                  {if $_errors.support_phone}<div class="invalid-feedback">{$_errors.support_phone}</div>{/if}</div>
              <div class="form-group m-0">
                  <label>Shop URL</label>
                  <input type="text" class="form-control form-control-sm{if $_errors.homepage_url} is-invalid{/if}" name="homepage_url"{if $homepage_url} value="{$homepage_url}"{/if}>
                  <small id="UrlHelp" class="form-text text-muted">Ihre Shop-Domain inklusive http:// (z.B. http://www.ihr-shop.de)</small>
                  {if $_errors.homepage_url}<div class="invalid-feedback">{$_errors.homepage_url}</div>{/if}</div>
            <div class="form-group m-0">
              <label>Kategorie an verkauften Waren</label>
              <select class="form-control form-control-sm" name="organization_category">
                {foreach from=$klarna_categories item=category}
                  	<option value="{$category->id}"{if $organization_category eq $category->id}selected{/if}>{$category->text}</option>
                  {/foreach}
              </select>
            </div>
            <div class="form-check mt-4">
              <input class="form-check-input" type="checkbox" value="" id="tccheck" required>
              <label class="form-check-label" for="tccheck"> Ich stimme den <a href="https://cdn.klarna.com/1.0/shared/content/legal/terms/0/xx_xx/SMI_KCOv3_scheme" target="_blank">Klarna Nutzungsbedingungen zu</a></label>
            </div>
        </div>
        </div>
      </div>
    </div>
  </div>
  <div id="regform_buttons" class="p-0">
    <div class="container">
      <div class="row">
        <div class="col-md-4"></div>
        <div class="col-md-4 text-center">
        <button class="btn btn-primary m-4 text-white" id="submitbutton" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Registrierung wird übermittelt" type="submit">Jetzt registrieren</button>
        </div>
        <div class="col-md-4">
                <a class="btn btn-outline-primary m-4" href="klarna.php?page=existing_account">Ich habe bereits einen Klarna Account</a>
        </div>
      </div>
    </div>
  </div>
  
  

  </form>

  
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
<script src="jquery.chained.js"></script>
<script type="text/javascript">

$(document).ready(function() {
	var checkbox = $("#registercheck");
	var registered = $("#registered_fields");
	var unregistered = $("#unregistered_fields");
	
	registered.hide();	
	unregistered.show();
	
	if (checkbox.is(':checked')) {
		registered.show();
		unregistered.hide();
	}
	
	checkbox.change(function() {
	
		if (checkbox.is(':checked')) {
			registered.show();
			unregistered.hide();
			
		} else {
			registered.hide();
			unregistered.show();
		}
	});
});
</script>
<script type="text/javascript">
$("#country").stateselector("#organization_registration_authority");
$("div#other_country_info").hide();
</script>
<script>
    $(document).ready(function () {
    	$("#submitbutton").attr("enabled", true);
        $("#registerForm").submit(function (e) {
            //disable the submit button
            $("#submitbutton").attr("disabled", true);
            return true;

        });
    });
</script>
</body>
</html>